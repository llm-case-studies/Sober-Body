# Sober‚ÄëBody ‚Äî Sprint¬†#2 (PWA Polish) Kick‚ÄëOff

## 1¬†¬∑ Context Dump (copy‚Äëpaste into the new chat intro)

* **Repo:** [https://github.com/llm-case-studies/Sober-Body](https://github.com/llm-case-studies/Sober-Body)
* **Read first:** `docs/CONTRIBUTING.md`, `docs/ARCHITECTURE.md`
* **Latest success:** Modal manager merged; PT tongue‚Äëtwister deck live.
* **Top priorities:** PWA manifest¬†+ icons ¬∑ Deck import (CSV) ¬∑ Azure Pronunciation scorer ¬∑ Prettier radial BAC gauge.
* **Environment:** Node¬†20 ¬∑ npm¬†11.

---

## 2¬†¬∑ Current Repo Checkpoint

| Area                     | Status                                                         |
| ------------------------ | -------------------------------------------------------------- |
| **Core BAC engine**      | Fraction‚Äëbased Widmark, unit‚Äëtested                            |
| **Drink log¬†+ settings** | IndexedDB persistence via `storage.ts`                         |
| **Dashboard¬†v0**         | Live BAC + DrinkButtons, personal settings modal               |
| **Engagement**           | Pronunciation Coach + EN/PT decks via `ModalProvider`          |
| **Docs**                 | `CONTRIBUTING`, `ARCHITECTURE`, `BACKLOG` fully split & linked |
| **CI**                   | Node¬†20, Vitest, lint ‚Äì all green                              |

Everything pushed to **main**; tests pass locally.

---

## 3¬†¬∑ Open Backlog ‚Äì Top¬†4 (see `docs/BACKLOG.md` for full list)

1. **feat(pwa):** add manifest + icons for **isoberbuddy.com** deploy
2. **feat(storage):** twister deck import / CSV upload
3. **feat(ml):** switch scorer to Azure Pronunciation Assessment
4. **feat(ui):** prettier BAC gauge (radial bar)

---

## 4¬†¬∑ Suggested House‚ÄëKeeping

| Task                            | Tool / Space                                                   |
| ------------------------------- | -------------------------------------------------------------- |
| **Create GitHub Project board** | Columns: *Backlog* ¬∑ *In¬†Progress* ¬∑ *In¬†Review* ¬∑ *Done*      |
| **Open new chat / doc thread**  | Title: *‚ÄúSober‚ÄëBody ‚Äî Sprint¬†#2 (PWA polish)‚Äù*                 |
| **Link this chat**              | Drop summary link in `README` or first message of new chat     |
| **Automate issue¬†‚Üí project**    | Enable ‚ÄúLinked PRs automatically move cards‚Äù in board settings |

---

## 5¬†¬∑ Next‚ÄëStep Checklist

*

---

*Document generated by ChatGPT on 26¬†Jun¬†2025 (America/New\_York).*\*

---

## 6¬†¬∑ Monorepo Restructure (Pronunciation¬†Coach¬†Ôºã¬†Sober‚ÄëBody)

We‚Äôve agreed to keep both efforts in **one repo** under a simple workspace layout so Codex/GitHub Copilot can stay context‚Äëaware while we iterate:

```
/               # repo root
‚îú‚îÄ apps/
‚îÇ   ‚îî‚îÄ sober-body/            # existing PWA
‚îú‚îÄ packages/
‚îÇ   ‚îî‚îÄ pronunciation-coach/   # new reusable component
‚îî‚îÄ pnpm‚Äëworkspace.yaml (or Yarn/NPM workspaces)
```

### Bootstrap Tasks

| # | Task                                                                           | Owner | Notes                                                   |
| - | ------------------------------------------------------------------------------ | ----- | ------------------------------------------------------- |
| 1 | Scaffold `packages/pronunciation-coach` (Vite React¬†TS)                        |       |                                                         |
| 2 | Move current app to `apps/sober-body`                                          |       | path update only                                        |
| 3 | Add workspace tool (pnpm) + root scripts (`dev:sober`, `dev:coach`, `dev:all`) |       | `dev:all` runs both servers via `pnpm dlx concurrently` |
| 4 | Update CI matrix to cache & test each workspace                                |       |                                                         |
| 5 | Adjust import paths, ensure dev server still runs                              |       |                                                         |
| 6 | Doc update: ARCHITECTURE.md ‚ÄúMonorepo layout¬†+ split later‚Äù                    |       |                                                         |

> *Extraction later:* `git subtree split --prefix=packages/pronunciation-coach` keeps full history when we graduate the package to its own repo.

## 7 ¬∑ Pronunciation‚ÄØCoach ‚Äî Teacher UI MVP (design snapshot)

While the **Tongue‚ÄëTwister modal** lives inside *Sober‚ÄëBody*, the teacher‚Äëfacing **Pronunciation‚ÄØCoach** will ship as a separate workspace page so it can evolve independently yet share the same repo.

### Temporary access path

| Mode                        | How to launch                                    | URL                                                                     |
| --------------------------- | ------------------------------------------------ | ----------------------------------------------------------------------- |
| **Local dev** (single Vite) | `pnpm --filter apps/sober-body dev`              | [http://localhost:5173/coach](http://localhost:5173/coach)              |
| **Package playground**      | `pnpm --filter packages/pronunciation-coach dev` | [http://localhost:5174/](http://localhost:5174/) (Storybook / mini‚Äëapp) |

*(Both will exist; teachers can use either, while the BAC Dashboard can link to **`/coach`**.)*

### MVP feature checklist

| # | Feature                                                       | Notes                                                                                                         |
| - | ------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------- |
| 1 | Route `/coach` registered in Sober‚ÄëBody router                | simple page wrapper ‚Üí `<PronunciationCoachUI />`                                                              |
| 2 | Textarea + language `<select>` ‚Üí ‚ÄúStart Drill‚Äù                | feeds props to `<PronunciationCoach>` component                                                               |
| 3 | **Multi‚Äëline paste parsing**                                  | auto‚Äësplit textarea by newline; each line becomes its own drill item; UI shows line list + Prev/Next controls |
| 4 | IndexedDB persistence for custom decks                        | uses `sb_twisters` or dedicated `pc_decks` key                                                                |
| 5 | CSV/JSON import button                                        | enable batch lesson uploads                                                                                   |
| 6 | Post‚Äësession report JSON download                             | placeholder until full teacher dashboard later                                                                |
| 7 | Link from BAC header (üßë‚Äçüè´ icon)                             | optional shortcut                                                                                             |
| 8 | **Granularity selector** (line‚ÄØ/‚ÄØsentence‚ÄØ/‚ÄØparagraph‚ÄØ/‚ÄØfull) | student chooses drill scope; UI toggles chunk size before starting                                            |
