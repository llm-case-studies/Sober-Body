# Soberâ€‘Body â€” SprintÂ #2 (PWA Polish) Kickâ€‘Off

## 1Â Â· Context Dump (copyâ€‘paste into the new chat intro)

* **Repo:** [https://github.com/llm-case-studies/Sober-Body](https://github.com/llm-case-studies/Sober-Body)
* **Read first:** `docs/CONTRIBUTING.md`, `docs/ARCHITECTURE.md`
* **Latest success:** Modal manager merged; PT tongueâ€‘twister deck live.
* **Top priorities:** PWA manifestÂ + icons Â· Deck import (CSV) Â· Azure Pronunciation scorer Â· Prettier radial BAC gauge.
* **Environment:** NodeÂ 20 Â· npmÂ 11.

---

## 2Â Â· Current Repo Checkpoint

| Area                     | Status                                                         |
| ------------------------ | -------------------------------------------------------------- |
| **Core BAC engine**      | Fractionâ€‘based Widmark, unitâ€‘tested                            |
| **Drink logÂ + settings** | IndexedDB persistence via `storage.ts`                         |
| **DashboardÂ v0**         | Live BAC + DrinkButtons, personal settings modal               |
| **Engagement**           | Pronunciation Coach + EN/PT decks via `ModalProvider`          |
| **Docs**                 | `CONTRIBUTING`, `ARCHITECTURE`, `BACKLOG` fully split & linked |
| **CI**                   | NodeÂ 20, Vitest, lint â€“ all green                              |

Everything pushed to **main**; tests pass locally.

---

## 3Â Â· Open Backlog â€“ TopÂ 4 (see `docs/BACKLOG.md` for full list)

1. **feat(pwa):** add manifest + icons for **isoberbuddy.com** deploy
2. **feat(storage):** twister deck import / CSV upload
3. **feat(ml):** switch scorer to Azure Pronunciation Assessment
4. **feat(ui):** prettier BAC gauge (radial bar)

---

## 4Â Â· Suggested Houseâ€‘Keeping

| Task                            | Tool / Space                                                   |
| ------------------------------- | -------------------------------------------------------------- |
| **Create GitHub Project board** | Columns: *Backlog* Â· *InÂ Progress* Â· *InÂ Review* Â· *Done*      |
| **Open new chat / doc thread**  | Title: *â€œSoberâ€‘Body â€” SprintÂ #2 (PWA polish)â€*                 |
| **Link this chat**              | Drop summary link in `README` or first message of new chat     |
| **Automate issueÂ â†’ project**    | Enable â€œLinked PRs automatically move cardsâ€ in board settings |

---

## 5Â Â· Nextâ€‘Step Checklist

*

---

*Document generated by ChatGPT on 26Â JunÂ 2025 (America/New\_York).*\*

---

## 6Â Â· Monorepo Restructure (PronunciationÂ CoachÂ ï¼‹Â Soberâ€‘Body)

Weâ€™ve agreed to keep both efforts in **one repo** under a simple workspace layout so Codex/GitHub Copilot can stay contextâ€‘aware while we iterate:

```
/               # repo root
â”œâ”€ apps/
â”‚   â””â”€ sober-body/            # existing PWA
â”œâ”€ packages/
â”‚   â””â”€ pronunciation-coach/   # new reusable component
â””â”€ pnpmâ€‘workspace.yaml (or Yarn/NPM workspaces)
```

### Bootstrap Tasks

| # | Task                                                                           | Owner | Notes                                                   |
| - | ------------------------------------------------------------------------------ | ----- | ------------------------------------------------------- |
| 1 | Scaffold `packages/pronunciation-coach` (Vite ReactÂ TS)                        |       |                                                         |
| 2 | Move current app to `apps/sober-body`                                          |       | path update only                                        |
| 3 | Add workspace tool (pnpm) + root scripts (`dev:sober`, `dev:coach`, `dev:all`) |       | `dev:all` runs both servers via `pnpm dlx concurrently` |
| 4 | Update CI matrix to cache & test each workspace                                |       |                                                         |
| 5 | Adjust import paths, ensure dev server still runs                              |       |                                                         |
| 6 | Doc update: ARCHITECTURE.md â€œMonorepo layoutÂ + split laterâ€                    |       |                                                         |

> *Extraction later:* `git subtree split --prefix=packages/pronunciation-coach` keeps full history when we graduate the package to its own repo.

## 7 Â· Pronunciationâ€¯Coach â€” Teacher UI MVP (design snapshot)

While the **Tongueâ€‘Twister modal** lives inside *Soberâ€‘Body*, the teacherâ€‘facing **Pronunciationâ€¯Coach** will ship as a separate workspace page so it can evolve independently yet share the same repo.

### Temporary access path

| Mode                        | How to launch                                    | URL                                                                     |
| --------------------------- | ------------------------------------------------ | ----------------------------------------------------------------------- |
| **Local dev** (single Vite) | `pnpm --filter apps/sober-body dev`              | [http://localhost:5173/coach](http://localhost:5173/coach)              |
| **Package playground**      | `pnpm --filter packages/pronunciation-coach dev` | [http://localhost:5174/](http://localhost:5174/) (Storybook / miniâ€‘app) |

*(Both will exist; teachers can use either, while the BAC Dashboard can link to **`/coach`**.)*

### MVP feature checklist

| # | Feature                                                       | Notes                                                                                                         |
| - | ------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------- |
| 1 | Route `/coach` registered in Soberâ€‘Body router                | simple page wrapper â†’ `<PronunciationCoachUI />`                                                              |
| 2 | Textarea + language `<select>` â†’ â€œStart Drillâ€                | feeds props to `<PronunciationCoach>` component                                                               |
| 3 | **Multiâ€‘line paste parsing**                                  | autoâ€‘split textarea by newline; each line becomes its own drill item; UI shows line list + Prev/Next controls |
| 4 | IndexedDB persistence for custom decks                        | uses `sb_twisters` or dedicated `pc_decks` key                                                                |
| 5 | CSV/JSON import button                                        | enable batch lesson uploads                                                                                   |
| 6 | Postâ€‘session report JSON download                             | placeholder until full teacher dashboard later                                                                |
| 7 | Link from BAC header (ğŸ§‘â€ğŸ« icon)                             | optional shortcut                                                                                             |
| 8 | **Granularity selector** (lineâ€¯/â€¯sentenceâ€¯/â€¯paragraphâ€¯/â€¯full) | student chooses drill scope; UI toggles chunk size before starting                                            |

## 8 Â· UI refinement proposal

* Add a flex container around the lesson builder and drill panes so the layout stretches with the viewport.
* Textarea uses `min-height: 80vh` to give more room for multi-line lessons.
* `<LineNavigator>` renders the parsed line list and calls `setIndex` when a line is clicked.
* Play/Record controls sit in the right-hand drill pane next to the active phrase.
